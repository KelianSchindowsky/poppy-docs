<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>Using a simulated robot with V-REP &mdash; Poppy project 1.1.0 documentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="../../_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="../../_static/css/bootstrap3/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" type="text/css" />

<link rel="stylesheet" href="../../_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="../../_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.1.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../../_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="shortcut icon" href="../../_static/poppy_flower_logo-small.png"/>
    <link rel="top" title="Poppy project 1.1.0 documentation" href="../../index.html" />
    <link rel="up" title="Introduction" href="index.html" />
    <link rel="next" title="REST API" href="remote_access.html" />
    <link rel="prev" title="Primitives" href="primitive.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">Poppy project 1.1.0 documentation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
              <li class="dropdown visible-xs">
                <a role="button" id="localToc" data-toggle="dropdown" data-target="#" href="#">Table Of Contents <b class="caret"></b></a>
                <ul class="dropdown-menu localtoc sp-localtoc" role="menu" aria-labelledby="localToc">
                <ul>
<li><a class="reference internal" href="#">Using a simulated robot with V-REP</a><ul>
<li><a class="reference internal" href="#what-is-v-rep">What is V-rep ?</a></li>
<li><a class="reference internal" href="#connecting-to-v-rep">Connecting to V-REP</a></li>
</ul>
</li>
</ul>

                </ul>
              </li>

            
              <li><a href="primitive.html" title="Primitives" accesskey="P">previous </a></li>
              <li><a href="remote_access.html" title="REST API" accesskey="N">next </a></li>
              <li><a href="../../py-modindex.html" title="Python Module Index" >modules </a></li>
              <li><a href="../../genindex.html" title="General Index" accesskey="I">index </a></li>
              <li><a href="index.html" accesskey="U">Introduction</a></li>
            
            <li class="visible-xs"><a href="../../_sources/pypot/doc/vrep.txt" rel="nofollow">Show Source</a></li>

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="../../search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Go" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">

      <!-- row -->
      <div class="row">
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
    <p class="logo"><a href="../../index.html">
      <img class="logo" src="../../_static/poppy_name_h144.png" alt="Logo"/>
    </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Using a simulated robot with V-REP</a><ul>
<li><a class="reference internal" href="#what-is-v-rep">What is V-rep ?</a></li>
<li><a class="reference internal" href="#connecting-to-v-rep">Connecting to V-REP</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="primitive.html"
                        title="previous chapter">Primitives</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="remote_access.html"
                        title="next chapter">REST API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/pypot/doc/vrep.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" role="search">
  <h3>Quick search</h3>
  <form class="search form-inline" action="../../search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Go" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="using-a-simulated-robot-with-v-rep">
<span id="using-a-simulated-robot-with-v-rep"></span><h1>Using a simulated robot with V-REP<a class="headerlink" href="#using-a-simulated-robot-with-v-rep" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference external" href="../../quickstarts/vrep.html">here</a> for a quickstart using Poppy Humanoid.</p>
<div class="section" id="what-is-v-rep">
<span id="what-is-v-rep"></span><h2>What is V-rep ?<a class="headerlink" href="#what-is-v-rep" title="Permalink to this headline">¶</a></h2>
<p>As it is often easier to work in simulation rather than with the real
robot, pypot has been linked with the <a class="reference external" href="http://www.coppeliarobotics.com">V-REP
simulator</a>. It is described as the
&#8220;Swiss army knife among robot simulators&#8221; and is a very powerful tool to
quickly (re)create robotics setup. As presenting V-REP is way beyond the
scope of this tutorial, we will here assume that you are already
familiar with this tool. Otherwise, you should directly refer to <a class="reference external" href="http://www.coppeliarobotics.com/helpFiles/index.html">V-REP
documentation</a>.</p>
<p>Details about how to connect pypot and V-REP can be found in <a class="reference external" href="https://forum.poppy-project.org/t/howto-connect-pypot-to-your-simulated-version-of-poppy-humanoid-in-v-rep/332">this
post</a>.</p>
<p>The connection between pypot and V-REP was designed to let you
seamlessly switch from your real robot to the simulated one. It is based
on <a class="reference external" href="http://www.coppeliarobotics.com/helpFiles/en/remoteApiFunctionsPython.htm">V-REP&#8217;s remote
API</a>.</p>
<p>In order to connect to V-REP through pypot, you will only need to
install the <a class="reference external" href="http://www.coppeliarobotics.com/downloads.html">V-REP</a>
simulator. Pypot comes with a specific <a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO</a> designed
to communicate with V-REP through its <a class="reference external" href="http://www.coppeliarobotics.com/helpFiles/en/remoteApiFunctionsPython.htm">remote
API</a>.</p>
<p>This IO can be used to:</p>
<ul class="simple">
<li>connect to the V-REP server : <a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO</a></li>
<li>load a scene : <a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.load_scene</a></li>
<li>start/stop/restart a simulation :
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.start_simulation</a>,
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.stop_simulation</a>,
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.restart_simulation</a></li>
<li>pause/resume the simulation :
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.pause_simulation</a>
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.resume_simulation</a></li>
<li>get/set a motor position :
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.get_motor_position</a>,
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.set_motor_position</a></li>
<li>get an object position/orientation :
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.get_object_position</a>,
<a class="reference external" href="pypot.vrep.html#pypot.vrep.io.VrepIO">pypot.vrep.io.VrepIO.get_object_orientation</a></li>
</ul>
</div>
<div class="section" id="connecting-to-v-rep">
<span id="connecting-to-v-rep"></span><h2>Connecting to V-REP<a class="headerlink" href="#connecting-to-v-rep" title="Permalink to this headline">¶</a></h2>
<p>First launch V-rep.</p>
<p>Then create your <a class="reference external" href="pypot.robot.html#pypot.robot.robot.Robot">pypot.robot.robot.Robot</a> using the
<a class="reference external" href="pypot.vrep.html#pypot.vrep.from_vrep">pypot.vrep.from_vrep</a> method, providing the vrep host, port
and scene instead of the <a class="reference external" href="pypot.robot.html#pypot.robot.config.from_config">pypot.robot.config.from_config</a> method:</p>
<pre class="literal-block">
# Working with the simulated version
import pypot.vrep

poppy = pypot.vrep.from_vrep(config, vrep_host, vrep_port, vrep_scene)
</pre>
<p>This function tries to connect to a V-REP instance and expects to find
motors with names corresponding as the ones found in the config.</p>
<blockquote>
<div><p><strong>note</strong></p>
<p>The returned <a class="reference external" href="pypot.robot.html#pypot.robot.robot.Robot">pypot.robot.robot.Robot</a> will also provide a convenient
reset_simulation method which resets the simulation and the robot
position to its intial stance.</p>
</div></blockquote>
<p>Default host is localhost (&#8216;127.0.0.1&#8217;) and default port is 19997 (the
default one for V-rep), so if you launched V-rep on the same computer,
you can use the <a class="reference external" href="pypot.vrep.html#pypot.vrep.from_vrep">pypot.vrep.from_vrep</a> function with only the
config argument.</p>
<p>The default vrep_scene is None, you can set it to the path of any .ttt
file (containing, for example, additionnal objects that your robot can
interact with).</p>
<p>The tracked_objects optionnal parameter is a list of V-REP dummy object
to track, while the tracked_collisions is a list of V-REP collision to
track.</p>
<p>The <a class="reference external" href="pypot.robot.html#pypot.robot.robot.Robot">pypot.robot.robot.Robot</a> object will be equivalent to the one
created in the case of a real robot, but not all dynamixel registers
have their V-REP equivalent. For the moment, only the control of the
position is used. Primitives (that use only thr mootrs positions) can be
used without problems.</p>
<p>If you use a creature-specific library to create your
<a class="reference external" href="pypot.robot.html#pypot.robot.robot.Robot">pypot.robot.robot.Robot</a>  (as poppy-humanoid for example), you can
simply use the &#8216;simulator&#8217; argument. If V-rep is not on the same
machine, specify the vrep_host and vrep_port arguments:</p>
<pre class="literal-block">
from poppy_humanoid import PoppyHumanoid

poppy = PoppyHumanoid(simulator='vrep')
</pre>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="../../index.html">Poppy project 1.1.0 documentation</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="primitive.html" title="Primitives" >previous</a></li>
        <li><a href="remote_access.html" title="REST API" >next</a></li>
        <li><a href="../../py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="../../genindex.html" title="General Index" >index</a></li>
        <li><a href="index.html" >Introduction</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2015, INRIA.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>
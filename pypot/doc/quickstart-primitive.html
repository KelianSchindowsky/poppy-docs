<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>QuickStart: use a primitive &mdash; Poppy project 1.1.0 documentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="../../_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="../../_static/css/bootstrap3/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" type="text/css" />

<link rel="stylesheet" href="../../_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="../../_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.1.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../../_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="shortcut icon" href="../../_static/poppy_flower_logo-small.png"/>
    <link rel="top" title="Poppy project 1.1.0 documentation" href="../../index.html" />
    <link rel="up" title="Introduction" href="index.html" />
    <link rel="next" title="Dynamixel Low-level IO" href="dynamixel.html" />
    <link rel="prev" title="QuickStart: create a Robot" href="quickstart-configfile.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">Poppy project 1.1.0 documentation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
              <li class="dropdown visible-xs">
                <a role="button" id="localToc" data-toggle="dropdown" data-target="#" href="#">Table Of Contents <b class="caret"></b></a>
                <ul class="dropdown-menu localtoc sp-localtoc" role="menu" aria-labelledby="localToc">
                <ul>
<li><a class="reference internal" href="#">QuickStart: use a primitive</a><ul>
<li><a class="reference internal" href="#what-is-a-primitive">What is a primitive?</a></li>
<li><a class="reference internal" href="#example-record-and-replay-moves">Example: Record and replay moves</a></li>
</ul>
</li>
</ul>

                </ul>
              </li>

            
              <li><a href="quickstart-configfile.html" title="QuickStart: create a Robot" accesskey="P">previous </a></li>
              <li><a href="dynamixel.html" title="Dynamixel Low-level IO" accesskey="N">next </a></li>
              <li><a href="../../py-modindex.html" title="Python Module Index" >modules </a></li>
              <li><a href="../../genindex.html" title="General Index" accesskey="I">index </a></li>
              <li><a href="index.html" accesskey="U">Introduction</a></li>
            
            <li class="visible-xs"><a href="../../_sources/pypot/doc/quickstart-primitive.txt" rel="nofollow">Show Source</a></li>

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="../../search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Go" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">

      <!-- row -->
      <div class="row">
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
    <p class="logo"><a href="../../index.html">
      <img class="logo" src="../../_static/poppy_name_h144.png" alt="Logo"/>
    </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">QuickStart: use a primitive</a><ul>
<li><a class="reference internal" href="#what-is-a-primitive">What is a primitive?</a></li>
<li><a class="reference internal" href="#example-record-and-replay-moves">Example: Record and replay moves</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quickstart-configfile.html"
                        title="previous chapter">QuickStart: create a Robot</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dynamixel.html"
                        title="next chapter">Dynamixel Low-level IO</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/pypot/doc/quickstart-primitive.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" role="search">
  <h3>Quick search</h3>
  <form class="search form-inline" action="../../search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Go" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="quickstart-use-a-primitive">
<span id="quickstart-primitive"></span><h1>QuickStart: use a primitive<a class="headerlink" href="#quickstart-use-a-primitive" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-primitive">
<h2>What is a primitive?<a class="headerlink" href="#what-is-a-primitive" title="Permalink to this headline">¶</a></h2>
<p>A primitive is a behavior, simple or complex, that can be started, stopped and executes in parallel of your script.</p>
<p>Primitives allow you to build really easily complex and modular behavior. For example, you can have one primitive to move the head, one to walk and one to check if someone moves your arm.</p>
<p>A primitive must first be created, then you call the <em>start()</em> function to start it. When you want to stop it, simply use the <em>stop()</em> function.
While the primitive runs, it call the <em>run()</em> function in a loop.</p>
<p>Some primitives are defined in Pypot. Other of specific to a robot and therefore defined in the specific libraries. You can of course define you own primitives.</p>
</div>
<div class="section" id="example-record-and-replay-moves">
<h2>Example: Record and replay moves<a class="headerlink" href="#example-record-and-replay-moves" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="pypot.primitive.html#module-pypot.primitive.move" title="pypot.primitive.move"><code class="xref py py-mod docutils literal"><span class="pre">move</span></code></a> module contains utility classes to help you record and play moves. A <a class="reference internal" href="pypot.primitive.html#pypot.primitive.move.Move" title="pypot.primitive.move.Move"><code class="xref py py-class docutils literal"><span class="pre">Move</span></code></a> object simply contains a sequence of positions.</p>
<p>The <a class="reference internal" href="pypot.primitive.html#pypot.primitive.move.MoveRecorder" title="pypot.primitive.move.MoveRecorder"><code class="xref py py-class docutils literal"><span class="pre">MoveRecorder</span></code></a> and <a class="reference internal" href="pypot.primitive.html#pypot.primitive.move.MovePlayer" title="pypot.primitive.move.MovePlayer"><code class="xref py py-class docutils literal"><span class="pre">MovePlayer</span></code></a> are primitives included in Pypot and allow you to record a move and replay it.</p>
<p>Assuming you have a <a class="reference internal" href="pypot.robot.html#module-pypot.robot" title="pypot.robot"><code class="xref py py-class docutils literal"><span class="pre">robot</span></code></a> poppy already created:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pypot.primitive.move</span> <span class="kn">import</span> <span class="n">Move</span><span class="p">,</span> <span class="n">MoveRecorder</span><span class="p">,</span> <span class="n">MovePlayer</span>

<span class="n">record_frequency</span> <span class="o">=</span> <span class="mf">20.0</span> <span class="c"># This means that a new position will be recorded 50 times per second.</span>
<span class="n">recorded_motors</span> <span class="o">=</span> <span class="n">poppy</span><span class="o">.</span><span class="n">motors</span> <span class="c"># We will record the position of all motors</span>

<span class="c">#disable torque for all motors</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">recorded_motors</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">compliant</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c">#create the recorder primitive</span>
<span class="n">recorder</span> <span class="o">=</span> <span class="n">MoveRecorder</span><span class="p">(</span><span class="n">poppy</span><span class="p">,</span> <span class="n">record_frequency</span><span class="p">,</span> <span class="n">recorded_motors</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;start recording&quot;</span>
<span class="n">recorder</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;stop recording&quot;</span>
<span class="n">recorder</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c">#save the recorded move in a file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;mymove.json&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">recorder</span><span class="o">.</span><span class="n">move</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>During the 20 seconds wait, move the robot. The angular positions will be recorded, stored in recorder.move and, at the end, saved into a file called mymove.json. You can open this file with text editor to check what it contains.</p>
<p>We can now replay the move:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#read the file containing the move</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;mymove.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">loaded_move</span> <span class="o">=</span> <span class="n">Move</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c">#create the primitive</span>
<span class="n">player</span> <span class="o">=</span> <span class="n">MovePlayer</span><span class="p">(</span><span class="n">poppy</span><span class="p">,</span> <span class="n">loaded_move</span><span class="p">)</span>

<span class="c">#enable torque for all motors</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">poppy</span><span class="o">.</span><span class="n">motors</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">compliant</span> <span class="o">=</span> <span class="bp">False</span>

<span class="k">print</span> <span class="s">&quot;starting&quot;</span>
<span class="n">player</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">player</span><span class="o">.</span><span class="n">wait_to_stop</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;finished&quot;</span>

<span class="c">#disable torque for all motors</span>
<span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">poppy</span><span class="o">.</span><span class="n">motors</span><span class="p">:</span>
    <span class="n">m</span><span class="o">.</span><span class="n">compliant</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>To learn more about primitives, see <a class="reference internal" href="primitive.html#primitives"><span>here</span></a>.</p>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="../../index.html">Poppy project 1.1.0 documentation</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="quickstart-configfile.html" title="QuickStart: create a Robot" >previous</a></li>
        <li><a href="dynamixel.html" title="Dynamixel Low-level IO" >next</a></li>
        <li><a href="../../py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="../../genindex.html" title="General Index" >index</a></li>
        <li><a href="index.html" >Introduction</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2015, INRIA.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>
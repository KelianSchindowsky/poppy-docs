<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>Control a Poppy robot using Snap! &mdash; Poppy project 1.1.0 documentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="../_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="../_static/css/bootstrap3/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" type="text/css" />

<link rel="stylesheet" href="../_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="../_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../',
            VERSION:     '1.1.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="../_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="shortcut icon" href="../_static/poppy_flower_logo-small.png"/>
    <link rel="top" title="Poppy project 1.1.0 documentation" href="../index.html" />
    <link rel="next" title="Using V-rep to simulate a Poppy Humanoid robot" href="vrep.html" />
    <link rel="prev" title="Discover your Poppy robot" href="discover.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">Poppy project 1.1.0 documentation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
              <li class="dropdown visible-xs">
                <a role="button" id="localToc" data-toggle="dropdown" data-target="#" href="#">Table Of Contents <b class="caret"></b></a>
                <ul class="dropdown-menu localtoc sp-localtoc" role="menu" aria-labelledby="localToc">
                <ul>
<li><a class="reference internal" href="#">Control a Poppy robot using Snap!</a><ul>
<li><a class="reference internal" href="#introducing-snap">Introducing Snap!</a></li>
<li><a class="reference internal" href="#create-the-snap-server">Create the Snap! server</a><ul>
<li><a class="reference internal" href="#start-the-server-on-the-robot">Start the server on the robot</a></li>
<li><a class="reference internal" href="#start-the-server-on-your-computer">Start the server on your computer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controlling-the-robot">Controlling the robot</a><ul>
<li><a class="reference internal" href="#pypot-snap-blocks">Pypot Snap! blocks</a></li>
<li><a class="reference internal" href="#use-a-slider-to-move-a-motor">Use a slider to move a motor</a></li>
<li><a class="reference internal" href="#example-playing-a-sinus-on-a-motor">Example: playing a sinus on a motor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#record-and-play-moves-using-snap">Record and play moves using Snap!</a></li>
</ul>
</li>
</ul>

                </ul>
              </li>

            
              <li><a href="discover.html" title="Discover your Poppy robot" accesskey="P">previous </a></li>
              <li><a href="vrep.html" title="Using V-rep to simulate a Poppy Humanoid robot" accesskey="N">next </a></li>
              <li><a href="../py-modindex.html" title="Python Module Index" >modules </a></li>
              <li><a href="../genindex.html" title="General Index" accesskey="I">index </a></li>
            
            <li class="visible-xs"><a href="../_sources/quickstarts/snap.txt" rel="nofollow">Show Source</a></li>

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="../search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Go" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container-fluid">

      <!-- row -->
      <div class="row">
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
    <p class="logo"><a href="../index.html">
      <img class="logo" src="../_static/poppy_name_h144.png" alt="Logo"/>
    </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Control a Poppy robot using Snap!</a><ul>
<li><a class="reference internal" href="#introducing-snap">Introducing Snap!</a></li>
<li><a class="reference internal" href="#create-the-snap-server">Create the Snap! server</a><ul>
<li><a class="reference internal" href="#start-the-server-on-the-robot">Start the server on the robot</a></li>
<li><a class="reference internal" href="#start-the-server-on-your-computer">Start the server on your computer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#controlling-the-robot">Controlling the robot</a><ul>
<li><a class="reference internal" href="#pypot-snap-blocks">Pypot Snap! blocks</a></li>
<li><a class="reference internal" href="#use-a-slider-to-move-a-motor">Use a slider to move a motor</a></li>
<li><a class="reference internal" href="#example-playing-a-sinus-on-a-motor">Example: playing a sinus on a motor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#record-and-play-moves-using-snap">Record and play moves using Snap!</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="discover.html"
                        title="previous chapter">Discover your Poppy robot</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="vrep.html"
                        title="next chapter">Using V-rep to simulate a Poppy Humanoid robot</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/quickstarts/snap.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" role="search">
  <h3>Quick search</h3>
  <form class="search form-inline" action="../search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Go" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <div class="section" id="control-a-poppy-robot-using-snap">
<span id="control-a-poppy-robot-using-snap"></span><h1>Control a Poppy robot using Snap!<a class="headerlink" href="#control-a-poppy-robot-using-snap" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introducing-snap">
<span id="introducing-snap"></span><h2>Introducing Snap!<a class="headerlink" href="#introducing-snap" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://snap.berkeley.edu">snap visual programming language</a> is a &#8220;very powerful visual, drag-and-drop programming
language. It is an extended reimplementation of Scratch (a project of
the Lifelong Kindergarten Group at the MIT Media Lab) that allows you to
Build Your Own Blocks&#8221;. It is an extremely efficient tool to learn how
to program for kids or even college students and also a powerful
prototyping method for artists.</p>
<p>Snap! is open-source and it is entirely written in javascript, you only
need a browser connected to the Poppy Creature webserver. No
installation is required on your computer!</p>
<p><img alt="image" src="../_images/snap-header.png" /></p>
<p>An introduction to this laguage can be found in the <a class="reference external" href="http://snap.berkeley.edu/SnapManual.pdf">Snap! reference manual</a>.</p>
</div>
<div class="section" id="create-the-snap-server">
<span id="create-the-snap-server"></span><h2>Create the Snap! server<a class="headerlink" href="#create-the-snap-server" title="Permalink to this headline">¶</a></h2>
<p>There are several ways of creating a Snap! server to control your robot.</p>
<p>Warning! At some point of this tutorial, you will have to import Poppy
Humanoid&#8217;s specific Snap! blocks. This may take a few minutes, so keep
the script running if your browser asks what to do.</p>
<div class="section" id="start-the-server-on-the-robot">
<span id="start-the-server-on-the-robot"></span><h3>Start the server on the robot<a class="headerlink" href="#start-the-server-on-the-robot" title="Permalink to this headline">¶</a></h3>
<p>The easiest way of controlling your Poppy robot with Snap! is to use the
webapp TODO. This will launch the server and use the Snap! software
installed on the robot.</p>
<p>Then hit the folder button, select open...-&gt;example and choose
pypot-snap-block.</p>
<p><img alt="snap visual programming language" src="../_images/snap-open-examples.png" /></p>
<p>Alternately (if you don&#8217;t have the webapp), you can use the following
command inside the robot:</p>
<pre class="literal-block">
poppy-snap poppy-humanoid --no-browser
</pre>
<p>The command gives you an URL (something like <a class="reference external" href="http://snap.berkeley.edu/snapsource/snap.html#open:http://poppy.local:6969/snap-blocks.xml">http://snap.berkeley.edu/snapsource/snap.html#open:http://-ROBOT-IP-:6969/snap-blocks.xml</a>).
Open this URL in your web browser.</p>
</div>
<div class="section" id="start-the-server-on-your-computer">
<span id="start-the-server-on-your-computer"></span><h3>Start the server on your computer<a class="headerlink" href="#start-the-server-on-your-computer" title="Permalink to this headline">¶</a></h3>
<p>Use this method if you use the motors directly linked to your computer:</p>
<pre class="literal-block">
from poppy_humanoid import PoppyHumanoid
poppy = PoppyHumanoid(use_snap=True)
poppy.snap.run()
</pre>
<p>You can even use simultaneously Snap! and V-rep:</p>
<pre class="literal-block">
from poppy_humanoid import PoppyHumanoid
poppy = PoppyHumanoid(simulator='vrep', use_snap=True)
poppy.snap.run()
</pre>
<p>Leave the Python script running. In you web browser, open the following
URL:</p>
<p><a class="reference external" href="http://snap.berkeley.edu/snapsource/snap.html#open:http://127.0.0.1:6969/snap-blocks.xml">http://snap.berkeley.edu/snapsource/snap.html#open:http://127.0.0.1:6969/snap-blocks.xml</a></p>
<p>Last solution: you can even, if you don&#8217;t have a reliable internet
connection when you use Snap!, download and install Snap! directly on
your computer <a class="reference external" href="https://github.com/jmoenig/Snap--Build-Your-Own-Blocks">from here</a>.</p>
<p>Then, open the snap.html file with your web browser and use the folder
button-&gt;import.. to import the Poppy specific blocks located in
<em>pypot/pypot/server/snap_projects</em>.</p>
</div>
</div>
<div class="section" id="controlling-the-robot">
<span id="controlling-the-robot"></span><h2>Controlling the robot<a class="headerlink" href="#controlling-the-robot" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pypot-snap-blocks">
<span id="pypot-snap-blocks"></span><h3>Pypot Snap! blocks<a class="headerlink" href="#pypot-snap-blocks" title="Permalink to this headline">¶</a></h3>
<p>The Poppy Snap! blocks are the following:</p>
<p><img alt="poppy specific snap blocks" src="../_images/snap-basic-blocks.png" /></p>
<p>Those blocks can be used to respectively:</p>
<ul class="simple">
<li>test if connection with poppy robot is working well</li>
<li>get a list of all motors name</li>
<li>get a list of all motors refered by an alias</li>
<li>get the value of a register motor (e.g. get motor &#8220;head_z&#8221; register
&#8220;present_load&#8221;)</li>
<li>get the index of a motor</li>
<li>get all alias avaible for the current robot</li>
</ul>
<ul class="simple">
<li>set a motor position in a specified time</li>
<li>turn a motor compliant or not</li>
<li>set a register of a motor (e.g. set motor &#8220;head_z&#8221; register
&#8220;present_load&#8221; to 10)</li>
<li>create/attach a move to some motors (you have to create a move
before to record or replay it)</li>
<li>stop the record of a move</li>
<li>start the record of a move</li>
<li>play a move at a defined speed</li>
<li>play a move in reverse at a defined speed</li>
<li>play concurently many moves</li>
<li>play sequentialy many moves</li>
</ul>
<p>You can easily see all blocks relative to poppy in Snap! with the &#8220;find
blocks&#8221; feature. You have to right-click in the left part of Snap! page
and select &#8220;find blocks&#8221;:</p>
<p><img alt="poppy specific snap blocks" src="../_images/snap-right-click.png" /></p>
</div>
<div class="section" id="use-a-slider-to-move-a-motor">
<span id="use-a-slider-to-move-a-motor"></span><h3>Use a slider to move a motor<a class="headerlink" href="#use-a-slider-to-move-a-motor" title="Permalink to this headline">¶</a></h3>
<p>To control a motor via a slider you need to make a variable - we will
call it head position.</p>
<p><img alt="create a variable with snap" src="../_images/snap-create-variable.png" /></p>
<p>Then right click on it and use the slider option. Change the slider
min/max to (-50, 50).</p>
<p><img alt="create a variable with snap" src="../_images/snap-slider.png" /></p>
<p>Then, connect it to a motor: use the motor(s) goto position block and
put it inside a forever loop. Add a wait for performance issue.</p>
<p><img alt="create a variable with snap" src="../_images/snap-slider-example.png" /></p>
</div>
<div class="section" id="example-playing-a-sinus-on-a-motor">
<span id="example-playing-a-sinus-on-a-motor"></span><h3>Example: playing a sinus on a motor<a class="headerlink" href="#example-playing-a-sinus-on-a-motor" title="Permalink to this headline">¶</a></h3>
<p>Having a motor position follow a sinus function is very useful to get
smooth periodic moves, as waving with the hand or saying &#8216;no&#8217; with the
head.</p>
<p>Can you, from this image, program your robot to say &#8216;yes&#8217; or &#8216;no&#8217; with
the head?</p>
<p><img alt="create a variable with snap" src="../_images/snap-sinus.png" /></p>
</div>
</div>
<div class="section" id="record-and-play-moves-using-snap">
<span id="record-and-play-moves-using-snap"></span><h2>Record and play moves using Snap!<a class="headerlink" href="#record-and-play-moves-using-snap" title="Permalink to this headline">¶</a></h2>
<p>If you opened the Snap! server using the webapp, you can directly load
the example called pypot-snap-record-orchestration-demo instead of
poppy-snap-blocks to find a ready-to-use Snap! project dedicated to the
record and replay of moves.</p>
<p>Otherwise, use the folder button-&gt;import.. and select
<em>pypot/pypot/server/snap_projects/pypot-snap-record-orchestration-demo.xml</em></p>
<p><img alt="record and replay moves using snap" src="../_images/snap-orchestration-demo.png" /></p>
</div>
</div>


                </div>
              </div>
            </div>
          </div>
        </div>
        
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="../index.html">Poppy project 1.1.0 documentation</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="discover.html" title="Discover your Poppy robot" >previous</a></li>
        <li><a href="vrep.html" title="Using V-rep to simulate a Poppy Humanoid robot" >next</a></li>
        <li><a href="../py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="../genindex.html" title="General Index" >index</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2015, INRIA.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>